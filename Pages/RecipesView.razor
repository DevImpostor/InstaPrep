@using InstaPrep.Data

@page "/recipe/{RecipeId}"
@inject IDataService dataService

<PageTitle>Recipe</PageTitle>

<MudGrid>
    <MudItem>
        <MudText Typo="Typo.h4" GutterBottom="true">RecipeID: @(CurrentRecipe?.Title ?? "No Recipe Found")</MudText>
    </MudItem>

    <MudItem>
        <MudText Typo="Typo.h6" GutterBottom="true">RecipeID: @(CurrentRecipe?.Duration ?? "No Recipe Found")</MudText>
    </MudItem>
    <MudItem>
        <MudText Typo="Typo.h6" GutterBottom="true">RecipeID: @(CurrentRecipe?.Effort ?? "No Recipe Found")</MudText>
    </MudItem>
    <MudItem>
        <MudText Typo="Typo.h6" GutterBottom="true">RecipeID: @(CurrentRecipe?.Rating ?? "No Recipe Found")</MudText>
    </MudItem>
    <MudItem>
        <MudImage ObjectFit="ObjectFit.Cover"
                  Class="rounded-lg"
                  Src="@CurrentRecipe?.ImageUrl"
                  Style="width:100%; height:155px" />
    </MudItem>

    <MudItem>
        <MudStack>
            @foreach (var ingredients in CurrentRecipe.IngredientsList)
            {
                <MudText Typo="Typo.h6" GutterBottom="true">@ingredients.Title</MudText>

            }
        </MudStack>

    </MudItem>

</MudGrid>

@code{

    [Parameter]
    public string RecipeId { get; set; } = string.Empty;

    private Recipe? CurrentRecipe = null;


    protected override void OnParametersSet()
    {
        base.OnParametersSet();

        if(RecipeId is not null)
        {

            var foundRecipe = dataService.GetRecipeById(RecipeId);

            if (foundRecipe is not null)
            {
                CurrentRecipe = foundRecipe;
            }
        }
        else
        {

        }
    }

}