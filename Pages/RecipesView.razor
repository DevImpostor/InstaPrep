@using InstaPrep.Data

@page "/recipe/{RecipeId}"
@inject IDataService dataService

<PageTitle>Recipe</PageTitle>

<MudGrid Spacing="4" Justify="Justify.FlexStart">
    @* --- Header --- *@
    <MudItem xs="4">
        <MudStack>
            @* --- Title --- *@
            <MudText Typo="Typo.h4">@(CurrentRecipe?.Title ?? "Loading") </MudText>
            @* --- Metrics --- *@
            <MudStack Row="true">
                <MudStack>
                    <MudText>Prep Time</MudText>
                    <MudText Color="Color.Secondary">25 mins</MudText>
                </MudStack>
                <MudStack>
                    <MudText>Prep Time</MudText>
                    <MudText>25 mins</MudText>
                </MudStack>
                <MudStack>
                    <MudText>Prep Time</MudText>
                    <MudText>25 mins</MudText>
                </MudStack>
            </MudStack>
            @* --- Photo --- *@
            <MudImage ObjectFit="ObjectFit.Cover"
                      Class="rounded-lg"
                      Src="@CurrentRecipe.ImageUrl"
                      Style="width:100%; height:155px" />
        </MudStack>
    </MudItem>

    @* --- List --- *@
<MudItem xs="8">
    <MudStack>
        @* --- Title --- *@
        <MudText Typo="Typo.h4">Ingredients 2</MudText>

        <MudList Clickable="false" >

            @foreach (var ingredient in CurrentRecipe.IngredientsList)
                {

      
            <MudListItem>
                <MudGrid>
                    @* --- Checkbox --- *@
                    <MudItem xs="1">
                        <MudCheckBox Checked="@true"></MudCheckBox>
                    </MudItem>

                    @* --- Title --- *@
                    <MudItem xs="9">
                        <MudText>@ingredient.Title</MudText>
                    </MudItem>

                    @* --- Measure --- *@
                    <MudItem xs="2">
                        <MudText>1 Tbs</MudText>
                    </MudItem>
                </MudGrid>
            </MudListItem>
                }

        </MudList>

    </MudStack>
</MudItem>


</MudGrid>

@code{

    [Parameter]
    public string RecipeId { get; set; } = string.Empty;

    private Recipe? CurrentRecipe = null;


    protected override void OnParametersSet()
    {
        base.OnParametersSet();

        if(RecipeId is not null)
        {

            var foundRecipe = dataService.GetRecipeById(RecipeId);

            if (foundRecipe is not null)
            {
                CurrentRecipe = foundRecipe;
            }
        }
        else
        {

        }
    }

}