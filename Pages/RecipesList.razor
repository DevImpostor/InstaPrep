@using InstaPrep.Data
@inject NavigationManager NavManager

@page "/"

<PageTitle>My Recipes</PageTitle>

<MudText Typo="Typo.h4" Class="mb-6">My Recipes</MudText>

<MudGrid Spacing="4" Justify="Justify.FlexStart">
    @*-- Card Template --*@
    @foreach (var recipe in AllRecipes)
    {
        <MudItem sm="12" md="6" lg="4" xl="3" xxl="2">
            <MudPaper Elevation="4">
                <MudGrid Class="pa-4">
                    @*--- Card Image ----*@
                    <MudItem xs="4">
                        <MudImage ObjectFit="ObjectFit.Cover"
                                  Class="rounded-lg"
                                  Src="@recipe.ImageUrl"
                                  Style="width:100%; height:155px" />
                    </MudItem>
                    @*--- Card Body ----*@
                    <MudItem xs="8">
                        <MudGrid Spacing="1">
                            @*--- Title ----*@
                            <MudItem xs="12">
                                <MudText Style="font-weight:600">@recipe.Title</MudText>
                            </MudItem>

                            @*--- Rating ----*@
                            <MudItem xs="12">
                                <MudRating MaxValue="3" SelectedValue="2" />
                            </MudItem>

                            @*--- Compleixty ----*@
                            <MudItem xs="6">
                                <MudChip Icon="@Icons.Filled.GroupWork" Color="Color.Primary">@recipe.Effort</MudChip>
                            </MudItem>

                            @*--- Duration ----*@
                            <MudItem xs="6">
                                <MudChip Icon="@Icons.Filled.Timelapse" Color="Color.Primary">@recipe.Duration</MudChip>
                            </MudItem>

                            @*--- Open Button ----*@
                            <MudItem xs="12">
                                <MudButton Color="Color.Secondary" OnClick="@((args) => OpenRecipe(recipe.Id))" Variant="Variant.Filled" FullWidth="true">Open Recipe</MudButton>
                            </MudItem>
                        </MudGrid>
                    </MudItem>
                </MudGrid>
            </MudPaper>
        </MudItem>

        @*--- Divider ----*@
        @if (AllRecipes.LastOrDefault()?.Id != recipe.Id)
        {
            <MudDivider />
        }

    }
</MudGrid>



@code{

    private List<Recipe> AllRecipes { get; set; } = new List<Recipe>();

    private void OpenRecipe(MouseEventArgs eventArgs) 
    {


    }
    protected override void OnInitialized()
    {
        base.OnInitialized();

        AllRecipes.Add(new Recipe()
        {
            ImageUrl = "https://www.simplyrecipes.com/thmb/H4fqk2mwQtlil9fc2FBrUrz8zYU=/648x0/filters:no_upscale():max_bytes(150000):strip_icc()/__opt__aboutcom__coeus__resources__content_migration__simply_recipes__uploads__2007__03__salmon-moqueca-vertical-a-1600-d79c82bba5fb48c09de050fc0dbbfa6f.jpg",
            Title = "Brazilian Salmon Stew",
            Duration = "1-2 Hours",
            Effort = "Easy",
            Rating = "2"
        });

        AllRecipes.Add(new Recipe()
        {
            ImageUrl = "https://www.simplyrecipes.com/thmb/Cq-nXMpurSH2lkL5olkG1tIBeTE=/648x0/filters:no_upscale():max_bytes(150000):strip_icc()/__opt__aboutcom__coeus__resources__content_migration__simply_recipes__uploads__2016__07__zucchini-noodle-chicken-pesto-bowl-vertical-a-1600-51560a436ab14af087d11aad2f9d2e3e.jpg",
            Title = "Zucchini Noodle Chicken Pesto Bowl",
            Duration = "1 Hour",
            Effort = "Hard",
            Rating = "2"
        });

        AllRecipes.Add(new Recipe()
        {
            ImageUrl = "https://www.simplyrecipes.com/thmb/b8GgK0mUbud6yc3kLSRYPHKUVXw=/648x0/filters:no_upscale():max_bytes(150000):strip_icc()/__opt__aboutcom__coeus__resources__content_migration__simply_recipes__uploads__2020__09__Cauliflower-Bolognese-LEAD-3-fe948fa876eb4cf79e7a35d31d547d01.jpg",
            Title = "Roasted Cauliflower and Mushroom Bolognese",
            Duration = "1-2 Hours",
            Effort = "Medium",
            Rating = "2"
        });

        AllRecipes.Add(new Recipe()
        {
            ImageUrl = "https://www.simplyrecipes.com/thmb/aSVwF5cLIPsxTV6Shh41yTfJzQI=/736x0/filters:no_upscale():max_bytes(150000):strip_icc()/__opt__aboutcom__coeus__resources__content_migration__simply_recipes__uploads__2014__09__apple-pie-horiz-a-1800-1ffab9404eb04308a8149c7d69a52472.jpg",
            Title = "Homemade Apple Pie",
            Duration = "3 Hours",
            Effort = "Hard",
            Rating = "2"
        });
    }

    private void OpenRecipe(string recipeId)
    {
        NavManager.NavigateTo("/recipe/" + recipeId);
    }

}